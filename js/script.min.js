let chooseCity=document.querySelector("#choose_city"),currentCityChoosed="";function cityWeather(){fetch(`http://api.openweathermap.org/data/2.5/forecast?id=${currentCityChoosed}&appid=9443ba5433385fbddc1433f445b2f66f`).then((function(resp){return resp.json()})).then((function(data){let arrayData=data.list,today,tomorrow;function getAllTime(){let outAllTime=[];for(let i=0;i<arrayData.length;i++)outAllTime.push(arrayData[i].dt);return outAllTime}console.log(arrayData);let date=new Date,plusOneDay=86400,arrayDays={},firstDay,secondDay,thirdDay,fourthDay,fiveDay,zeroIndexFirstDay,zeroIndexSecondDay,zeroIndexThirdDay,zeroIndexFourthDay,zeroIndexFiveDay;today=Math.round(date.setHours(0,0,0,0)/1e3+7200),tomorrow=Math.round(date.setHours(24,0,0,0)/1e3+7200);for(let i=1;i<6;i++){let arrayUnixTime=[];for(let k=today;k<tomorrow;k+=10800)-1!==getAllTime().indexOf(k)&&arrayUnixTime.push(k);today+=86400,tomorrow+=86400,arrayDays[i]=arrayUnixTime}for(let key in arrayDays)for(let i=0;i<arrayDays[key].length;i++)1==key&&(firstDay=arrayDays[key]),2==key&&(secondDay=arrayDays[key]),3==key&&(thirdDay=arrayDays[key]),4==key&&(fourthDay=arrayDays[key]),5==key&&(fiveDay=arrayDays[key]);let startSearch=[];for(let i=0;i<arrayData.length;i++)startSearch.push(arrayData[i].dt),zeroIndexFirstDay=startSearch.indexOf(firstDay[0]),zeroIndexSecondDay=startSearch.indexOf(secondDay[0]),zeroIndexThirdDay=startSearch.indexOf(thirdDay[0]),zeroIndexFourthDay=startSearch.indexOf(fourthDay[0]),zeroIndexFiveDay=startSearch.indexOf(fiveDay[0]);const dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];let firstDayWeek,secondDayWeek,thirdDayWeek,fourthDayWeek,fiveDayWeek;firstDayWeek=`${dayNames[new Date(1e3*arrayData[zeroIndexFirstDay].dt).getDay()]} \n                        ${new Date(1e3*arrayData[zeroIndexFirstDay].dt).getDate()}`,secondDayWeek=`${dayNames[new Date(1e3*arrayData[zeroIndexSecondDay].dt).getDay()]} \n                        ${new Date(1e3*arrayData[zeroIndexSecondDay].dt).getDate()}`,thirdDayWeek=`${dayNames[new Date(1e3*arrayData[zeroIndexThirdDay].dt).getDay()]} \n                        ${new Date(1e3*arrayData[zeroIndexThirdDay].dt).getDate()}`,fourthDayWeek=`${dayNames[new Date(1e3*arrayData[zeroIndexFourthDay].dt).getDay()]} \n                        ${new Date(1e3*arrayData[zeroIndexFourthDay].dt).getDate()}`,fiveDayWeek=`${dayNames[new Date(1e3*arrayData[zeroIndexFiveDay].dt).getDay()]} \n                        ${new Date(1e3*arrayData[zeroIndexFiveDay].dt).getDate()}`;let addStyle=document.querySelector(".weather-position"),outFirstDay=document.querySelector(".first-day"),outSecondDay=document.querySelector(".second-day"),outThirdDay=document.querySelector(".third-day"),outFourthDay=document.querySelector(".fourth-day"),outFiveDay=document.querySelector(".five-day"),out_firstWeekDay,out_firstTemperature,out_firstDayWeather,out_firstImage,out_secondWeekDay,out_secondTemperature,out_secondDayWeather,out_secondImage,out_thirdWeekDay,out_thirdTemperature,out_thirdDayWeather,out_thirdImage,out_fourthWeekDay,out_fourthTemperature,out_fourthDayWeather,out_fourthImage,out_fiveWeekDay,out_fiveTemperature,out_fiveDayWeather,out_fiveImage;addStyle.classList.add("add-style"),out_firstWeekDay=`<div class="week-day">${firstDayWeek}</div>`,out_firstTemperature=`<div class="temperature">${Math.round(arrayData[zeroIndexFirstDay].main.temp-273)}&deg;</div>`,out_firstDayWeather=`<div class="weather">${arrayData[zeroIndexFirstDay].weather[0].main}</div>`,out_firstImage=`<div class="image"><img src="https://openweathermap.org/img/wn/${arrayData[zeroIndexFirstDay].weather[0].icon}@2x.png"></div>`,out_secondWeekDay=`<div class="week-day">${secondDayWeek}</div>`,out_secondTemperature=`<div class="temperature">${Math.round(arrayData[zeroIndexSecondDay].main.temp-273)}&deg;</div>`,out_secondDayWeather=`<div class="weather">${arrayData[zeroIndexSecondDay].weather[0].main}</div>`,out_secondImage=`<div class="image"><img src="https://openweathermap.org/img/wn/${arrayData[zeroIndexSecondDay].weather[0].icon}@2x.png"></div>`,out_thirdWeekDay=`<div class="week-day">${thirdDayWeek}</div>`,out_thirdTemperature=`<div class="temperature">${Math.round(arrayData[zeroIndexThirdDay].main.temp-273)}&deg;</div>`,out_thirdDayWeather=`<div class="weather">${arrayData[zeroIndexThirdDay].weather[0].main}</div>`,out_thirdImage=`<div class="image"><img src="https://openweathermap.org/img/wn/${arrayData[zeroIndexThirdDay].weather[0].icon}@2x.png"></div>`,out_fourthWeekDay=`<div class="week-day">${fourthDayWeek}</div>`,out_fourthTemperature=`<div class="temperature">${Math.round(arrayData[zeroIndexFourthDay].main.temp-273)}&deg;</div>`,out_fourthDayWeather=`<div class="weather">${arrayData[zeroIndexFourthDay].weather[0].main}</div>`,out_fourthImage=`<div class="image"><img src="https://openweathermap.org/img/wn/${arrayData[zeroIndexFourthDay].weather[0].icon}@2x.png"></div>`,out_fiveWeekDay=`<div class="week-day">${fiveDayWeek}</div>`,out_fiveTemperature=`<div class="temperature">${Math.round(arrayData[zeroIndexFiveDay].main.temp-273)}&deg;</div>`,out_fiveDayWeather=`<div class="weather">${arrayData[zeroIndexFiveDay].weather[0].main}</div>`,out_fiveImage=`<div class="image"><img src="https://openweathermap.org/img/wn/${arrayData[zeroIndexFiveDay].weather[0].icon}@2x.png"></div>`,outFirstDay.innerHTML+=out_firstWeekDay,outFirstDay.innerHTML+=out_firstTemperature,outFirstDay.innerHTML+=out_firstDayWeather,outFirstDay.innerHTML+=out_firstImage,outSecondDay.innerHTML+=out_secondWeekDay,outSecondDay.innerHTML+=out_secondTemperature,outSecondDay.innerHTML+=out_secondDayWeather,outSecondDay.innerHTML+=out_secondImage,outThirdDay.innerHTML+=out_thirdWeekDay,outThirdDay.innerHTML+=out_thirdTemperature,outThirdDay.innerHTML+=out_thirdDayWeather,outThirdDay.innerHTML+=out_thirdImage,outFourthDay.innerHTML+=out_fourthWeekDay,outFourthDay.innerHTML+=out_fourthTemperature,outFourthDay.innerHTML+=out_fourthDayWeather,outFourthDay.innerHTML+=out_fourthImage,outFiveDay.innerHTML+=out_fiveWeekDay,outFiveDay.innerHTML+=out_fiveTemperature,outFiveDay.innerHTML+=out_fiveDayWeather,outFiveDay.innerHTML+=out_fiveImage})).catch((function(){}))}function clearWeatherOut(){document.querySelector(".first-day").innerHTML="",document.querySelector(".second-day").innerHTML="",document.querySelector(".third-day").innerHTML="",document.querySelector(".fourth-day").innerHTML="",document.querySelector(".five-day").innerHTML=""}document.addEventListener("DOMContentLoaded",(function(){let instances=M.FormSelect.init(chooseCity)})),chooseCity.onchange=function(){currentCityChoosed=this.value,cityWeather(),clearWeatherOut()};